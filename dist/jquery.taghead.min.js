/*
 *  jQuery TagHead - v3.3.4
 *  A jQuery plugin to mix typhead and tags
 *  
 *
 *  Made by Caligone
 *  Under MIT License
 */
(function(){!function(a,b,c){var d,e,f;return f="taghead",e={remote:{enable:!1,source:"",method:"GET",sentParam:"value",displayData:"value",storeData:"value",minLength:2,forceValid:!1},allowDuplicates:!1,style:{wrapperClass:"taghead-wrapper",tagClass:"taghead-tag",tagListWrapperClass:"taghead-tag-list-wrapper",tagListClass:"taghead-tag-list",tagListItemClass:"taghead-tag-list-item",inputClass:"taghead-input",removeClass:"taghead-remove"},text:{phAddTag:"Add a tag"}},d=function(){function b(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=f,this.tags=[],this.ids=[],this.init()}return b.prototype.init=function(){return a(this.element).wrap("<span class='"+this.settings.style.wrapperClass+"' id='taghead-wrapper'></span>"),this.wrapper=a("#taghead-wrapper")[0],a(this.wrapper).append("<input type='text' class='"+this.settings.style.inputClass+"' id='taghead-input' placeholder='"+this.settings.text.phAddTag+"'/>"),this.input=a("#taghead-input")[0],a(this.wrapper).append("<span class='"+this.settings.style.tagListWrapperClass+"' id='taghead-tag-list-wrapper'><ul class='"+this.settings.style.tagListClass+"' id='taghead-tag-list'></ul></span>"),this.list=a("#taghead-tag-list")[0],a(this.element).hide(),a(this.input).on("keyup",function(b){return function(c){var d;if(13===c.keyCode){if(b.settings.remote.forceValid)return;b.addTag(a(b.input).val(),a(b.input).val()),a(b.input).val("")}else 8===c.keyCode&&""===a(b.input).val()&&b.removeTag(b.tags[b.tags.length-1]);if(!(a(b.input).val().length<b.settings.remote.minLength))return b.settings.remote.enable?(d={},d[b.settings.remote.sentParam]=a(b.input).val(),a.ajax({type:b.settings.remote.method,url:b.settings.remote.source,data:d}).done(function(c){var d,e,f,g;for(a(b.list).empty(),g=[],e=0,f=c.length;f>e;e++)d=c[e],g.push(a(b.list).append("<li><a href='#' data-id='"+d[b.settings.remote.storeData]+"' class='"+b.settings.style.tagListItemClass+"'>"+d[b.settings.remote.displayData]+"</a></li>"));return g})):void 0}}(this)),a(c).on("click","a."+this.settings.style.removeClass,function(b){return function(c){var d;return d=a(c.target).parent().text().slice(0,-1),b.removeTag(d)}}(this)),a(c).on("click","a."+this.settings.style.tagListItemClass,function(b){return function(c){return b.addTag(a(c.target).text(),a(c.target).attr("data-id"))}}(this))},b.prototype.addTag=function(b,c){return this.settings.allowDuplicates||!(this.tags.indexOf(b)>-1||this.ids.indexOf(c)>-1)?(a(this.wrapper).append("<span class='"+this.settings.style.tagClass+"' data-label='"+b+"' data-id="+c+">"+b+"<a href='#' class='"+this.settings.style.removeClass+"'>X</a></span>"),this.tags.push(b),this.ids.push(c),a(this.element).val(this.ids.join(","))):void 0},b.prototype.removeTag=function(b,c){var d,e;return d=null!=c?this.ids.indexOf(c):this.tags.indexOf(b),d>-1&&(this.tags.splice(d,1),this.ids.splice(d,1),e=a("."+this.settings.style.tagClass+"[data-label='"+b+"']"),e.hasClass(this.settings.style.tagClass))?(e.remove(),a(this.element).val(this.ids.join(","))):void 0},b}(),a.fn[f]=function(b){return this.each(function(){return a.data(this,"plugin_"+f)?void 0:a.data(this,"plugin_"+f,new d(this,b))})}}(jQuery,window,document)}).call(this);